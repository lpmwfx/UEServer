# UEServer TODO

## Phase 1: RPC BRIDGE MVP

Goal: Get a minimal RPC server and bridge that can see each other with a simple ue-ping command.

### RPC Server (C++ in UE5)

- [x] Create UE5 plugin structure in rpc/
  - UEServer.uplugin
  - Source directory structure
  - Module setup (Public/Private headers)

- [x] Implement minimal TCP server
  - Bind to port 0 (OS assigns available port)
  - Write .ueserver/rpc.json with port/pid/started on startup
  - Clean up .ueserver/rpc.json on shutdown
  - Basic TCP connection handling

- [x] Add ping handler to RPC server
  - Receive JSON over TCP: {"op":"ping"}
  - Parse JSON request
  - Send JSON response: {"ok":true,"version":"0.1.0","op":"ping"}

- [ ] Test RPC server manually
  - Start UE5 with plugin enabled
  - Verify .ueserver/rpc.json is created
  - Test with nc/telnet: echo '{"op":"ping"}' | nc localhost <port>
  - Verify response is valid JSON

### Bridge CLI (Python with mypy)

- [ ] Create Python bridge CLI structure
  - Package structure: bridge/ue_bridge/
  - Setup pyproject.toml with mypy
  - Type definitions for RPC protocol
  - CLI entrypoint

- [ ] Implement port discovery
  - Read .ueserver/rpc.json from CWD
  - Parse port/pid/started fields
  - Validate PID (detect stale port files)
  - Error handling if RPC server not running

- [ ] Implement TCP client and ping command
  - Create TCP connection to localhost:<port>
  - Send ping JSON request
  - Receive and parse JSON response
  - CLI command: bridge-cli ue.ping

- [ ] Test end-to-end
  - Start UE5 with RPC server
  - Run bridge-cli ue.ping from project directory
  - Verify response shows ok=true and version
  - Test error cases (server not running, stale port file)

## Success Criteria

MVP is complete when:
1. UE5 plugin starts TCP server on dynamic port
2. .ueserver/rpc.json is created with correct port info
3. Bridge CLI can discover port and connect
4. `bridge-cli ue.ping` returns successful response
5. Error handling works (server down, stale files)

## Next Phase (Future)

- MCP adapter wrapper around bridge CLI
- Additional RPC operations (list widgets, trigger actions)
- UI inspection and control capabilities
- Integration with Claude Code via MCP
